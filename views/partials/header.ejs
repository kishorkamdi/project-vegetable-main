<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= pageTitle %> | Veggie Shop</title>
    <link rel="icon" href="/images/favicon.ico" type="image/x-icon" />
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <!-- Your Custom CSS (should come AFTER Bootstrap to override) -->
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/landing-cards.css">
    <!-- Optional: Add Google Fonts or other external resources here -->

    <!-- Swiper CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.css" />

    <!-- Dark Mode Toggle JS -->
    <script src="/js/dark-mode-toggle.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.3.2/lazysizes.min.js" async></script>
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('/js/service-worker.js').then(function(registration) {
                    console.log('ServiceWorker registration successful with scope: ', registration.scope);
                }, function(err) {
                    console.log('ServiceWorker registration failed: ', err);
                });
            });
        }
    </script>
    <script src="/js/navigation.js" defer></script>
</head>
<body class="dark-mode">
    <%- include('nav') %>

    <main class="container mt-4 mb-5"> <!-- Added mb-5 for spacing before footer -->
        <!-- Flash Messages -->
        <% if (success_msg && success_msg.length > 0) { %>
            <div class="alert alert-success alert-dismissible fade show" role="alert">
                <%= success_msg %>
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        <% } %>
        <% if (error_msg && error_msg.length > 0) { %>
             <!-- Handle multiple error messages if needed -->
             <% const errors = Array.isArray(error_msg) ? error_msg : [error_msg]; %>
             <% errors.forEach(msg => { %>
                <div class="alert alert-danger alert-dismissible fade show" role="alert">
                    <%= msg %>
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
             <% }); %>
        <% } %>
         <% if (error && error.length > 0) { %> <!-- For passport compatibility or general errors -->
            <div class="alert alert-danger alert-dismissible fade show" role="alert">
                <%= error %>
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        <% } %>
